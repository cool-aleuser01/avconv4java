<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Avconv4java by vbauer</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Avconv4java</h1>
        <h2>Java interface to avconv tool</h2>
        <a href="https://github.com/vbauer/avconv4java" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="introduction" class="anchor" href="#introduction"><span class="octicon octicon-link"></span></a>Introduction</h1>

<p>Project "avconv4java" is a pure-java interface to the avconv commandline.</p>

<p>Official avconv documentation could be found here: <a href="http://libav.org/avconv.html">http://libav.org/avconv.html</a></p>

<h1>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h1>

<ul>
<li>Supports most avconv commands</li>
<li>Reuse a commandline multiple times for different set of parameters</li>
<li>Options and operators translate into similar method-names, e.g.

<ul>
<li>-vcodec libx264 -&gt; .videoCodec(AVVideoCodecType.H264)</li>
<li>-vcodec libtheora -&gt; .videoCodec(AVVideoCodecType.THEORA)</li>
<li>-vcodec libtheora -&gt; .videoCodec("libtheora")</li>
</ul>
</li>
<li>Parallel processing out of box</li>
</ul><h1>
<a name="example" class="anchor" href="#example"><span class="octicon octicon-link"></span></a>Example</h1>

<p>First of all you need to configure options for avconv command. Builder pattern allows to do it as simple as possible:</p>

<div class="highlight highlight-java"><pre><span class="kd">final</span> <span class="n">AVOptions</span> <span class="n">options</span> <span class="o">=</span> <span class="n">AVRootOptions</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">"input.avi"</span><span class="o">,</span> <span class="s">"output.mp4"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">builders</span><span class="o">(</span>
        <span class="n">AVMainOptions</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
            <span class="o">.</span><span class="na">overwriteOutput</span><span class="o">(),</span>
        <span class="n">AVVideoOptions</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
            <span class="o">.</span><span class="na">proportionalResizeUsingWidth</span><span class="o">(</span><span class="mi">800</span><span class="o">)</span>
            <span class="o">.</span><span class="na">videoCodec</span><span class="o">(</span><span class="n">AVVideoCodecType</span><span class="o">.</span><span class="na">H264</span><span class="o">)</span>
            <span class="o">.</span><span class="na">movFlags</span><span class="o">(</span><span class="n">AVMovFlagsType</span><span class="o">.</span><span class="na">FAST_START</span><span class="o">),</span>
        <span class="n">AVAudioOptions</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
            <span class="o">.</span><span class="na">audioCodec</span><span class="o">(</span><span class="n">AVAudioCodecType</span><span class="o">.</span><span class="na">VISUAL_ON_AAC</span><span class="o">)</span>
            <span class="o">.</span><span class="na">audioBitRate</span><span class="o">(</span><span class="mi">128</span><span class="o">)</span>
            <span class="o">.</span><span class="na">audioChannelsCount</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
            <span class="o">.</span><span class="na">sampleRate</span><span class="o">(</span><span class="mi">11025</span><span class="o">),</span>
        <span class="n">AVCodecOptions</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
            <span class="o">.</span><span class="na">bitRate</span><span class="o">(</span><span class="mi">1000</span><span class="o">)</span>
    <span class="o">)</span>
</pre></div>

<p>To execute avconv command with needed options you should use the class com.avconv4java.core.AVCommnad:</p>

<div class="highlight highlight-java"><pre><span class="c1">// It'll be better to configure timeout always. Debug is useful sometimes.</span>
<span class="kd">final</span> <span class="n">AVCommand</span> <span class="n">command</span> <span class="o">=</span> <span class="n">AVCommand</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
    <span class="o">.</span><span class="na">setDebug</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setTimeout</span><span class="o">(</span><span class="n">timeout</span><span class="o">);</span>

<span class="kd">final</span> <span class="kt">int</span> <span class="n">returnCode</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">options</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">outputFile</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="na">getOutputFile</span><span class="o">();</span>

<span class="n">Logger</span><span class="o">.</span><span class="na">getGlobal</span><span class="o">().</span><span class="na">info</span><span class="o">(</span>
    <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"Output file: %s, return code: %d"</span><span class="o">,</span> <span class="n">outputFile</span><span class="o">,</span> <span class="n">returnCode</span><span class="o">)</span>
<span class="o">);</span>

</pre></div>

<p>This command is equivalent to the following:</p>

<div class="highlight highlight-bash"><pre>/usr/bin/avconv -i input.avi -y -vf <span class="nv">scale</span><span class="o">=</span><span class="nv">w</span><span class="o">=</span>800:h<span class="o">=</span>trunc<span class="o">(</span>ow/a/2<span class="o">)</span>*2 -vcodec libx264 -movflags faststart -acodec libvo_aacenc -ab 128k -b 1000k -ac <span class="m">2</span> -ar <span class="m">11025</span> output.mp4
</pre></div>

<h1>
<a name="faq" class="anchor" href="#faq"><span class="octicon octicon-link"></span></a>FAQ</h1>

<dl>
<dt>What is the default avconv path value?</dt>
    <dd>Environment variable "AVCONV4JAVA_TOOLPATH" will be checked in priority, otherwise it will be "/usr/bin/avconv".</dd>
</dl><h1>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h1>

<pre><code>Copyright 2014 Vladislav Bauer

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/vbauer/avconv4java/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/vbauer/avconv4java/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/vbauer/avconv4java"></a> is maintained by <a href="https://github.com/vbauer">vbauer</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>